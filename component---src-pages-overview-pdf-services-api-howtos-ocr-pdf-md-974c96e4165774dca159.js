"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[5073],{23815:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return c},default:function(){return m}});var s=t(87462),r=t(45987),a=(t(15007),t(64983)),o=t(91515);const i=["components"],c={},p=(l="CodeBlock",function(e){return console.warn("Component "+l+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.mdx)("div",e)});var l;const d={_frontmatter:c},u=o.Z;function m(e){let{components:n}=e,t=(0,r.Z)(e,i);return(0,a.mdx)(u,(0,s.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)("h1",{id:"ocr-pdf"},"OCR PDF"),(0,a.mdx)("p",null,"Use built-in optical character recognition (OCR) to convert images to text and enable fully text searchable documents for archiving and creation of searchable indexes."),(0,a.mdx)("h2",{id:"rest-api"},"REST API"),(0,a.mdx)("p",null,"See our public API Reference for ",(0,a.mdx)("a",{parentName:"p",href:"../../../apis/#tag/OCR"},"OCR PDF")),(0,a.mdx)("h2",{id:"text-recognition-ocr"},"Text recognition (OCR)"),(0,a.mdx)("p",null,"Optical character recognition (OCR) converts images to text so that you\nand your users can fully interact with the PDF file. After performing\nOCR, the PDF may be fully editable and searchable. The input format must\nbe ",(0,a.mdx)("inlineCode",{parentName:"p"},"application/pdf"),"."),(0,a.mdx)("p",null,"This sample defaults to the en-us locale. For other languages, see ",(0,a.mdx)("a",{parentName:"p",href:"#ocr-with-specific-language"},"OCR with specific language.")),(0,a.mdx)("p",null,"Please refer the ",(0,a.mdx)("a",{parentName:"p",href:"../api-usage.md"},"API usage guide")," to understand how to use our APIs."),(0,a.mdx)(p,{slots:"heading, code",repeat:"5",languages:"Java, .NET, Node JS, Python, REST API",mdxType:"CodeBlock"}),(0,a.mdx)("h4",{id:"java"},"Java"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},'// Get the samples from https://www.adobe.com/go/pdftoolsapi_java_samples\n// Run the sample:\n// mvn -f pom.xml exec:java -Dexec.mainClass=com.adobe.pdfservices.operation.samples.ocrpdf.OcrPDF\n \npublic class OcrPDF {\n \n  // Initialize the logger.\n  private static final Logger LOGGER = LoggerFactory.getLogger(OcrPDF.class);\n \n  public static void main(String[] args) {\n        try (InputStream inputStream = Files.newInputStream(new File("src/main/resources/ocrInput.pdf").toPath())) {\n             // Initial setup, create credentials instance\n            Credentials credentials = new ServicePrincipalCredentials(\n                    System.getenv("PDF_SERVICES_CLIENT_ID"),\n                    System.getenv("PDF_SERVICES_CLIENT_SECRET"));\n\n            // Creates a PDF Services instance\n            PDFServices pdfServices = new PDFServices(credentials);\n\n            // Creates an asset(s) from source file(s) and upload\n            Asset asset = pdfServices.upload(inputStream, PDFServicesMediaType.PDF.getMediaType());\n\n            // Creates a new job instance\n            OCRJob ocrJob = new OCRJob(asset);\n\n            // Submit the job and gets the job result\n            String location = pdfServices.submit(ocrJob);\n            PDFServicesResponse<OCRResult> pdfServicesResponse = pdfServices.getJobResult(location, OCRResult.class);\n\n            // Get content from the resulting asset(s)\n            Asset resultAsset = pdfServicesResponse.getResult().getAsset();\n            StreamAsset streamAsset = pdfServices.getContent(resultAsset);\n\n            // Creates an output stream and copy stream asset\'s content to it\n            Files.createDirectories(Paths.get("output/"));\n            OutputStream outputStream = Files.newOutputStream(new File("output/ocrOutput.pdf").toPath());\n            LOGGER.info("Saving asset at output/ocrOutput.pdf");\n            IOUtils.copy(streamAsset.getInputStream(), outputStream); \n            outputStream.close();\n       } catch (ServiceApiException | IOException | SDKException | ServiceUsageException ex) {\n        LOGGER.error("Exception encountered while executing operation", ex);\n       }\n  }\n}\n')),(0,a.mdx)("h4",{id:"net"},".NET"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},'// Get the samples from https://www.adobe.com/go/pdftoolsapi_net_samples\n// Run the sample:\n// cd OcrPDF/\n// dotnet run OcrPDF.csproj\n\n namespace OcrPDF\n {\n   class Program\n   {\n     private static readonly ILog log = LogManager.GetLogger(typeof(Program));\n     static void Main()\n     {\n       //Configure the logging\n       ConfigureLogging();\n       try\n       {\n           // Initial setup, create credentials instance.\n           Credentials credentials = Credentials.ServicePrincipalCredentialsBuilder()\n                .WithClientId("PDF_SERVICES_CLIENT_ID")\n                .WithClientSecret("PDF_SERVICES_CLIENT_SECRET")\n                .Build();\n\n         //Create an ExecutionContext using credentials and create a new operation instance.\n         ExecutionContext executionContext = ExecutionContext.Create(credentials);\n         OCROperation ocrOperation = OCROperation.CreateNew();\n\n         // Set operation input from a source file.\n         FileRef sourceFileRef = FileRef.CreateFromLocalFile(@"ocrInput.pdf");\n         ocrOperation.SetInput(sourceFileRef);\n\n         // Execute the operation.\n         FileRef result = ocrOperation.Execute(executionContext);\n\n         // Save the result to the specified location.\n         result.SaveAs(Directory.GetCurrentDirectory() + "/output/ocrOperationOutput.pdf");\n       }\n       catch (ServiceUsageException ex)\n       {\n         log.Error("Exception encountered while executing operation", ex);\n       }\n       // Catch more errors here. . .\n     }\n\n     static void ConfigureLogging()\n     {\n       ILoggerRepository logRepository = LogManager.GetRepository(Assembly.GetEntryAssembly());\n       XmlConfigurator.Configure(logRepository, new FileInfo("log4net.config"));\n     }\n   }\n }\n')),(0,a.mdx)("h4",{id:"node-js"},"Node JS"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},'// Get the samples from http://www.adobe.com/go/pdftoolsapi_node_sample\n// Run the sample:\n// node src/ocr/ocr-pdf.js\n\nconst {\n    ServicePrincipalCredentials,\n    PDFServices,\n    MimeType,\n    OCRJob,\n    OCRResult,\n    SDKError,\n    ServiceUsageError,\n    ServiceApiError\n} = require("@adobe/pdfservices-node-sdk");\nconst fs = require("fs");\n\n(async () => {\n    let readStream;\n    try {\n        // Initial setup, create credentials instance\n        const credentials = new ServicePrincipalCredentials({\n            clientId: process.env.PDF_SERVICES_CLIENT_ID,\n            clientSecret: process.env.PDF_SERVICES_CLIENT_SECRET\n        });\n\n        // Creates a PDF Services instance\n        const pdfServices = new PDFServices({credentials});\n\n        // Creates an asset(s) from source file(s) and upload\n        readStream = fs.createReadStream("./ocrInput.pdf");\n        const inputAsset = await pdfServices.upload({\n            readStream,\n            mimeType: MimeType.PDF\n        });\n\n        // Creates a new job instance\n        const job = new OCRJob({inputAsset});\n\n        // Submit the job and get the job result\n        const pollingURL = await pdfServices.submit({job});\n        const pdfServicesResponse = await pdfServices.getJobResult({\n            pollingURL,\n            resultType: OCRResult\n        });\n\n        // Get content from the resulting asset(s)\n        const resultAsset = pdfServicesResponse.result.asset;\n        const streamAsset = await pdfServices.getContent({asset: resultAsset});\n\n        // Creates a write stream and copy stream asset\'s content to it\n        const outputFilePath = "./ocrOutput.pdf";\n        console.log(`Saving asset at ${outputFilePath}`);\n\n        const writeStream = fs.createWriteStream(outputFilePath);\n        streamAsset.readStream.pipe(writeStream);\n    } catch (err) {\n        if (err instanceof SDKError || err instanceof ServiceUsageError || err instanceof ServiceApiError) {\n            console.log("Exception encountered while executing operation", err);\n        } else {\n            console.log("Exception encountered while executing operation", err);\n        }\n    } finally {\n        readStream?.destroy();\n    }\n})();\n')),(0,a.mdx)("h4",{id:"python"},"Python"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-python"},"# Get the samples https://github.com/adobe/pdfservices-python-sdk-samples\n# Run the sample:\n# python src/ocrpdf/ocr_pdf.py\n\n# Initialize the logger\nlogging.basicConfig(level=logging.INFO)\n\nclass OcrPDF(object):\n    def __init__(self):\n        try:\n            file = open('./ocrInput.pdf', 'rb')\n            input_stream = file.read()\n            file.close()\n\n            # Initial setup, create credentials instance\n            credentials = ServicePrincipalCredentials(\n                client_id=os.getenv('PDF_SERVICES_CLIENT_ID'),\n                client_secret=os.getenv('PDF_SERVICES_CLIENT_SECRET')\n            )\n\n            # Creates a PDF Services instance\n            pdf_services = PDFServices(credentials=credentials)\n\n            # Creates an asset(s) from source file(s) and upload\n            input_asset = pdf_services.upload(input_stream=input_stream,\n                                              mime_type=PDFServicesMediaType.PDF)\n\n            # Creates a new job instance\n            ocr_pdf_job = OCRPDFJob(input_asset=input_asset)\n\n            # Submit the job and gets the job result\n            location = pdf_services.submit(ocr_pdf_job)\n            pdf_services_response = pdf_services.get_job_result(location, OCRPDFResult)\n\n            # Get content from the resulting asset(s)\n            result_asset: CloudAsset = pdf_services_response.get_result().get_asset()\n            stream_asset: StreamAsset = pdf_services.get_content(result_asset)\n\n            # Creates an output stream and copy stream asset's content to it\n            output_file_path = 'output/OcrPDF.pdf'\n            with open(output_file_path, \"wb\") as file:\n                file.write(stream_asset.get_input_stream())\n\n        except (ServiceApiException, ServiceUsageException, SdkException) as e:\n            logging.exception(f'Exception encountered while executing operation: {e}')\n\nif __name__ == \"__main__\":\n    OcrPDF()\n")),(0,a.mdx)("h4",{id:"rest-api-1"},"REST API"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Please refer our REST API docs for more information \n// https://developer.adobe.com/document-services/docs/apis/#tag/Ocr\n\ncurl --location --request POST 'https://pdf-services.adobe.io/operation/ocr' \\\n--header 'x-api-key: {{Placeholder for client_id}}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {{Placeholder for token}}' \\\n--data-raw '{\n    \"assetID\": \"urn:aaid:AS:UE1:23c30ee0-2e4d-46d6-87f2-087832fca718\"\n}'\n")),(0,a.mdx)("h2",{id:"ocr-with-specific-language"},"OCR with specific language"),(0,a.mdx)("p",null,"You can perform OCR on files in other languages, including German,\nFrench, Danish, and other languages. Refer to ",(0,a.mdx)("inlineCode",{parentName:"p"},"OCRSupportedLocale")," and\n",(0,a.mdx)("inlineCode",{parentName:"p"},"OCRSupportedType")," in the API docs for a list of supported OCR locales\nand OCR types."),(0,a.mdx)("p",null,"As shown in the OcrPDFWithOptions sample, when you make a PDF file\nsearchable, you specify both the locale (language) and the type. There\nare two types which produce a different result:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"One type ensures that text is searchable and selectable, but\nmodifies the original image during the cleanup process (for example,\ndeskews it) before placing an invisible text layer over it. This\ntype removes unwanted artifacts and may result in a more readable\ndocument in some scenarios."),(0,a.mdx)("li",{parentName:"ul"},"The second (EXACT) type, also overlays a searchable text layer over\nthe original image, but in this case, the original image is\nunchanged. This type produces maximum fidelity to the original\nimage.")),(0,a.mdx)("p",null,"Please refer the ",(0,a.mdx)("a",{parentName:"p",href:"../api-usage.md"},"API usage guide")," to understand how to use our APIs."),(0,a.mdx)(p,{slots:"heading, code",repeat:"5",languages:"Java, .NET, Node JS, Python, REST API",mdxType:"CodeBlock"}),(0,a.mdx)("h4",{id:"java-1"},"Java"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},'// Get the samples from https://www.adobe.com/go/pdftoolsapi_java_samples\n// Run the sample:\n// mvn -f pom.xml exec:java Dexec.mainClass=com.adobe.pdfservices.operation.samples.ocrpdf.OcrPDFWithOptions\n \n  public class OcrPDFWithOptions {\n    // Initialize the logger.\n    private static final Logger LOGGER = LoggerFactory.getLogger(OcrPDFWithOptions.class);\n \n    public static void main(String[] args) {\n \n        try (InputStream inputStream = Files.newInputStream(new File("src/main/resources/ocrInput.pdf").toPath())) {\n            // Initial setup, create credentials instance\n            Credentials credentials = new ServicePrincipalCredentials(\n                    System.getenv("PDF_SERVICES_CLIENT_ID"),\n                    System.getenv("PDF_SERVICES_CLIENT_SECRET"));\n\n            // Creates a PDF Services instance\n            PDFServices pdfServices = new PDFServices(credentials);\n\n            // Creates an asset(s) from source file(s) and upload\n            Asset asset = pdfServices.upload(inputStream, PDFServicesMediaType.PDF.getMediaType());\n\n            // Create parameters for the job\n            OCRParams ocrParams = OCRParams.ocrParamsBuilder()\n                    .withOCRLocale(OCRSupportedLocale.EN_US)\n                    .withOCRType(OCRSupportedType.SEARCHABLE_IMAGE_EXACT)\n                    .build();\n\n            // Creates a new job instance\n            OCRJob ocrJob = new OCRJob(asset).setParams(ocrParams);\n\n            // Submit the job and gets the job result\n            String location = pdfServices.submit(ocrJob);\n            PDFServicesResponse<OCRResult> pdfServicesResponse = pdfServices.getJobResult(location, OCRResult.class);\n\n            // Get content from the resulting asset(s)\n            Asset resultAsset = pdfServicesResponse.getResult().getAsset();\n            StreamAsset streamAsset = pdfServices.getContent(resultAsset);\n\n            // Creates an output stream and copy stream asset\'s content to it\n            Files.createDirectories(Paths.get("output/"));\n            OutputStream outputStream = Files.newOutputStream(new File("output/ocrWithOptionsOutput.pdf").toPath());\n            LOGGER.info("Saving asset at output/ocrWithOptionsOutput.pdf");\n            IOUtils.copy(streamAsset.getInputStream(), outputStream); \n            outputStream.close();\n        } catch (ServiceApiException | IOException | SDKException | ServiceUsageException ex) {\n            LOGGER.error("Exception encountered while executing operation", ex);\n        }\n    }\n  }\n')),(0,a.mdx)("h4",{id:"net-1"},".NET"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},'// Get the samples from https://www.adobe.com/go/pdftoolsapi_net_samples\n// Run the sample:\n// cd OcrPDFWithOptions\n// dotnet run OcrPDFWithOptions.csproj\n\n namespace OcrPDFWithOptions\n {\n  class Program\n  {\n    private static readonly ILog log = LogManager.GetLogger(typeof(Program));\n    static void Main()\n    {\n      //Configure the logging\n      ConfigureLogging();\n      try\n      {\n          // Initial setup, create credentials instance.\n          Credentials credentials = Credentials.ServicePrincipalCredentialsBuilder()\n                .WithClientId("PDF_SERVICES_CLIENT_ID")\n                .WithClientSecret("PDF_SERVICES_CLIENT_SECRET")\n                .Build();\n \n        //Create an ExecutionContext using credentials and create a new operation instance.\n        ExecutionContext executionContext = ExecutionContext.Create(credentials);\n        OCROperation ocrOperation = OCROperation.CreateNew();\n \n        // Set operation input from a source file.\n        FileRef sourceFileRef = FileRef.CreateFromLocalFile(@"ocrWithOptionsInput.pdf");\n        ocrOperation.SetInput(sourceFileRef);\n        // Build OCR options from supported locales and OCR-types and set them into the operation\n        OCROptions ocrOptions = OCROptions.OCROptionsBuilder()\n            .WithOcrLocale(OCRSupportedLocale.EN_US)\n            .WithOcrType(OCRSupportedType.SEARCHABLE_IMAGE_EXACT)\n            .Build();\n        ocrOperation.SetOptions(ocrOptions);\n \n        // Execute the operation.\n        FileRef result = ocrOperation.Execute(executionContext);\n \n        // Save the result to the specified location.\n        result.SaveAs(Directory.GetCurrentDirectory() + "/output/ocrOperationWithOptionsOutput.pdf");\n      }\n      catch (ServiceUsageException ex)\n      {\n        log.Error("Exception encountered while executing operation", ex);\n      }\n      // Catch more errors here . . .\n    }\n \n    static void ConfigureLogging()\n    {\n      ILoggerRepository logRepository = LogManager.GetRepository(Assembly.GetEntryAssembly());\n      XmlConfigurator.Configure(logRepository, new FileInfo("log4net.config"));\n    }\n  }\n }\n')),(0,a.mdx)("h4",{id:"node-js-1"},"Node JS"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},'// Get the samples from http://www.adobe.com/go/pdftoolsapi_node_sample\n// Run the sample:\n// node src/ocr/ocr-pdf-with-options.js\n\nconst {\n    ServicePrincipalCredentials,\n    PDFServices,\n    MimeType,\n    OCRJob,\n    OCRParams,\n    OCRSupportedLocale,\n    OCRSupportedType,\n    OCRResult,\n    SDKError,\n    ServiceUsageError,\n    ServiceApiError\n} = require("@adobe/pdfservices-node-sdk");\nconst fs = require("fs");\n\n(async () => {\n    let readStream;\n    try {\n        // Initial setup, create credentials instance\n        const credentials = new ServicePrincipalCredentials({\n            clientId: process.env.PDF_SERVICES_CLIENT_ID,\n            clientSecret: process.env.PDF_SERVICES_CLIENT_SECRET\n        });\n\n        // Creates a PDF Services instance\n        const pdfServices = new PDFServices({credentials});\n\n        // Creates an asset(s) from source file(s) and upload\n        readStream = fs.createReadStream("./ocrInput.pdf");\n        const inputAsset = await pdfServices.upload({\n            readStream,\n            mimeType: MimeType.PDF\n        });\n\n        // Create parameters for the job\n        const params = new OCRParams({\n            ocrLocale: OCRSupportedLocale.EN_US,\n            ocrType: OCRSupportedType.SEARCHABLE_IMAGE_EXACT\n        });\n\n        // Creates a new job instance\n        const job = new OCRJob({inputAsset, params});\n\n        // Submit the job and get the job result\n        const pollingURL = await pdfServices.submit({job});\n        const pdfServicesResponse = await pdfServices.getJobResult({\n            pollingURL,\n            resultType: OCRResult\n        });\n\n        // Get content from the resulting asset(s)\n        const resultAsset = pdfServicesResponse.result.asset;\n        const streamAsset = await pdfServices.getContent({asset: resultAsset});\n\n        // Creates a write stream and copy stream asset\'s content to it\n        const outputFilePath = "./ocrWithOptionsOutput.pdf";\n        console.log(`Saving asset at ${outputFilePath}`);\n\n        const writeStream = fs.createWriteStream(outputFilePath);\n        streamAsset.readStream.pipe(writeStream);\n    } catch (err) {\n        if (err instanceof SDKError || err instanceof ServiceUsageError || err instanceof ServiceApiError) {\n            console.log("Exception encountered while executing operation", err);\n        } else {\n            console.log("Exception encountered while executing operation", err);\n        }\n    } finally {\n        readStream?.destroy();\n    }\n})();\n')),(0,a.mdx)("h4",{id:"python-1"},"Python"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-python"},"# Get the samples https://github.com/adobe/pdfservices-python-sdk-samples\n# Run the sample:\n# python src/ocrpdf/ocr_pdf_with_options.py\n\n# Initialize the logger\nlogging.basicConfig(level=logging.INFO)\n\nclass OcrPDFWithOptions:\n    def __init__(self):\n        try:\n            file = open('./ocrInput.pdf', 'rb')\n            input_stream = file.read()\n            file.close()\n\n            # Initial setup, create credentials instance\n            credentials = ServicePrincipalCredentials(\n                client_id=os.getenv('PDF_SERVICES_CLIENT_ID'),\n                client_secret=os.getenv('PDF_SERVICES_CLIENT_SECRET')\n            )\n\n            # Creates a PDF Services instance\n            pdf_services = PDFServices(credentials=credentials)\n\n            # Creates an asset(s) from source file(s) and upload\n            input_asset = pdf_services.upload(input_stream=input_stream,\n                                              mime_type=PDFServicesMediaType.PDF)\n\n            ocr_pdf_params = OCRParams(\n                ocr_locale=OCRSupportedLocale.EN_US,xw\n                ocr_type=OCRSupportedType.SEARCHABLE_IMAGE\n            )\n\n            # Creates a new job instance\n            ocr_pdf_job = OCRPDFJob(input_asset=input_asset, ocr_pdf_params=ocr_pdf_params)\n\n            # Submit the job and gets the job result\n            location = pdf_services.submit(ocr_pdf_job)\n            pdf_services_response = pdf_services.get_job_result(location, OCRPDFResult)\n\n            # Get content from the resulting asset(s)\n            result_asset: CloudAsset = pdf_services_response.get_result().get_asset()\n            stream_asset: StreamAsset = pdf_services.get_content(result_asset)\n\n            # Creates an output stream and copy stream asset's content to it\n            output_file_path = 'output/OcrPDFWithOptions.pdf'\n            with open(output_file_path, \"wb\") as file:\n                file.write(stream_asset.get_input_stream())\n\n        except (ServiceApiException, ServiceUsageException, SdkException) as e:\n            logging.exception(f'Exception encountered while executing operation: {e}')\n\nif __name__ == \"__main__\":\n    OcrPDFWithOptions()\n")),(0,a.mdx)("h4",{id:"rest-api-2"},"REST API"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Please refer our REST API docs for more information \n// https://developer.adobe.com/document-services/docs/apis/#tag/Ocr\n\ncurl --location --request POST 'https://pdf-services.adobe.io/operation/ocr' \\\n--header 'x-api-key: {{Placeholder for client_id}}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {{Placeholder for token}}' \\\n--data-raw '{\n    \"assetID\": \"ce8fe9da-99f2-4d01-999e-42b9ce22ec5f\",\n    \"ocrLang\": \"en-US\"\n}'\n")))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-overview-pdf-services-api-howtos-ocr-pdf-md-974c96e4165774dca159.js.map